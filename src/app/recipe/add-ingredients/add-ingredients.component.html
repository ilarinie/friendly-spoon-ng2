<md-card>
<md-card-title>Ingredients</md-card-title>
<md-card-subtitle>(ungrouped)</md-card-subtitle>
  <md-list dense>
    <md-list-item *ngFor="let inc of recipe.recipe_ingredients"><p md-line> <b>
    {{inc.ramount.integer}} <span *ngIf="inc.ramount.numerator"><sup>{{inc.ramount.numerator}}</sup>&frasl;<sub>{{inc.ramount.denominator}}</sub></span> {{inc.unit?.name}}
     {{inc.ingredient.name}} <span class="glyphicon glyphicon-remove" style="color:red" (click)="removeRecipeIngredient(inc)"></span>
   </b></p>
      <p md-line> {{inc.instruction}} </p>
    </md-list-item>
  </md-list>
</md-card>
<md-card  *ngFor="let group of recipe.recipe_ingredient_groups">

    <md-card-title>{{group.name}} </md-card-title>
    <md-list dense>
      <md-list-item *ngFor="let inc of group.recipe_ingredients"> <p md-line><b>
    {{inc.ramount.integer}} <span *ngIf="inc.ramount.numerator"><sup>{{inc.ramount.numerator}}</sup>&frasl;<sub>{{inc.ramount.denominator}}</sub></span> {{inc.unit?.name}}
     {{inc.ingredient.name}} <span class="glyphicon glyphicon-remove" style="color:red" (click)="removeRecipeIngredient(inc)"></span>
   </b></p>
        <p md-line> {{inc.instruction}} </p>
      </md-list-item>
    </md-list>

  <md-card-actions>
    <button md-button (click)="deleteGroup(group)">Delete Group</button>
  </md-card-actions>
</md-card>
<!--
<table class="table">
  <tr *ngFor="let inc of recipe.recipe_ingredients">
    <td class="col-md-2"> {{inc.ramount.integer}} <span *ngIf="inc.ramount.numerator"><sup>{{inc.ramount.numerator}}</sup>&frasl;<sub>{{inc.ramount.denominator}}</sub></span> {{inc.unit?.name}} </td>
    <td class="col-md-5"> {{inc.ingredient.name}} </td>
    <td class="col-md-5"> {{inc.instruction}} </td>
    <td class="col-md-2" style="text-align:right;">
      <button class="btn btn-danger" (click)="removeRecipeIngredient(inc)">Remove</button>
    </td>
  </tr>
</table>

<div *ngFor="let group of recipe.recipe_ingredient_groups">
  <h4>{{group.name}}  <span class="glyphicon glyphicon-remove" (click)="deleteGroup(group)"></span></h4>
  <table class="table">
    <tr *ngFor="let inc of group.recipe_ingredients">
      <td class="col-md-2"> {{inc.ramount.integer}} <span *ngIf="inc.ramount.numerator"><sup>{{inc.ramount.numerator}}</sup>&frasl;<sub>{{inc.ramount.denominator}}</sub></span> {{inc.unit?.name}} </td>
      <td class="col-md-5"> {{inc.ingredient.name}} </td>
      <td class="col-md-5"> {{inc.instruction}} </td>
      <td class="col-md-2" style="text-align:right;">
        <button class="btn btn-danger" (click)="removeRecipeIngredient(inc)">Remove</button>
      </td>
    </tr>
  </table>
</div>
-->
<div *ngIf="addingRecInc"> </div>
<md-card>
  <md-card-title>Add Ingredients</md-card-title>
  <md-input class="ingredient-create-field" #listFilter [(ngModel)]="ingredient.name" placeholder="Ingredient name"> </md-input> <a class="btn btn-success ingredient-create-button" (click)="saveIngredient()">Create</a>
  <div *ngIf="!addingRecInc">
    <div class="ingredient-add-box" *ngFor="let listingredient of ingredients | reverseFilter:listFilter.value">
      <h4 class="ingredient-header">{{listingredient.name}}</h4>
      <input class="form-control ingredient-amount-field" type="text" placeholder="Amount" [(ngModel)]="recipe_ingredient.amount">
      <select class="form-control info ingredient-unit-select" [(ngModel)]="recipe_ingredient.unit_id">
        <option value="" [selected]="!recipe_ingredient.unit_id">Unit</option>
        <option *ngFor="let unit of units" value="{{unit.id}}">{{unit.name}}</option>
      </select>
      <button class="btn btn-success ingredient-add-button" (click)="saveRecipeIngredient(listingredient.id)" [disabled]="addingRecInc">Add to Recipe</button>
      <input class="form-control ingredient-instruction-field" type="text" placeholder="Instruction - optional" [(ngModel)]="recipe_ingredient.instruction" />
      <select class="form-control info ingredient-instruction-field" [(ngModel)]="recipe_ingredient.recipe_ingredient_group_id">
        <option class="info" value="" [selected]="!recipe_ingredient.recipe_ingredient_group_id">Group</option>
        <option *ngFor="let group of recipe.recipe_ingredient_groups" value="{{group.id}}">{{group.name}}</option>
      </select>
    </div>
  </div>
  <div class="ingredient-add-box" *ngIf="addingRecInc"> <img src="img/gears.svg"> Adding.. </div>
</md-card>
<!--
<div *ngFor="let group of recipe.recipe_ingredient_groups">
  <h4>{{group.name}}</h4>
  <div>
    <input class="ingredient-add-field form-control" #listFilter type="text" [(ngModel)]="ingredient.name" placeholder="Ingredient" /> <a class="btn btn-success ingredient-create-button" (click)="saveIngredient()">Create</a>
  </div>

  <div class="ingredient-add-box" *ngFor="let listingredient of ingredients | reverseFilter:listFilter.value">
  <h4 class="ingredient-header">{{listingredient.name}}</h4>
  <input class="form-control ingredient-amount-field" type="text" placeholder="Amount" [(ngModel)]="recipe_ingredient.amount">
  <select class="form-control ingredient-unit-select" [(ngModel)]="recipe_ingredient.unit_id">
    <option value="" disabled selected="selected" autocomplete="off">Unit</option>
    <option *ngFor="let unit of units" value="{{unit.id}}">{{unit.name}}</option>
  </select>
  <button class="btn ingredient-add-button" (click)="saveRecipeIngredient(listingredient.id, group.id)">Add to Recipe</button>
  <input class="form-control ingredient-instruction-field" type="text" placeholder="Instruction - optional" [(ngModel)]="recipe_ingredient.instruction" />

  </div>

</div>
-->
<!--
<add-recipe-ingredient *ngFor="let group of recipe.recipe_ingredient_groups" [group]="group"> </add-recipe-ingredient>
-->
<md-card>
  <md-card-title>New ingredient group</md-card-title>
  <md-card-subtitle>eg. "Frosting"</md-card-subtitle>
  <md-input class="ingredient-create-field" [(ngModel)]="recipe_ingredient_group.name" placeholder="New Group"> </md-input> <span *ngIf="!addingGroup"><a class="btn btn-success ingredient-create-button" (click)="saveGroup()">Create</a></span> <span *ngIf="addingGroup"><a class="btn btn-warning ingredient-create-button" disabled="disabled">Adding</a></span> </md-card>
